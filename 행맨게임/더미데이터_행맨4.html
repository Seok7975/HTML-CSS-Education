<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>행맨게임</title>
    <style>
        .letter 
        {
            display: inline-block;
            width: 20px;
            margin: 5px;
            padding: 5px;
            border: 1px solid #000;
        }
        .correct 
        {
            color: blue;
        }
        .incorrect 
        {
            color: red;
        }

        #jolaman {
          font-family: Arial, sans-serif;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          flex-direction: column;
        }
        .hangman-svg {
          width: 200px;
          height: 250px;
          margin-bottom: 20px;
        }
        .svg-part {
          display: none;
        }

    </style>
</head>
<body>
    <div id="alphabet"></div>
    <div id="wordDisplay"></div>
    <div id="chancesDisplay"></div>
    <div id="jolaman">
        <svg class="hangman-svg" viewBox="0 0 100 120">
            <!-- 교수대는 항상 표시 -->
            <line x1="10" y1="110" x2="30" y2="110" stroke="black" stroke-width="2"/> <!-- 기지 -->
            <line x1="20" y1="110" x2="20" y2="10" stroke="black" stroke-width="2"/> <!-- 세로줄 -->
            <line x1="20" y1="10" x2="60" y2="10" stroke="black" stroke-width="2"/> <!-- 가로줄 -->
            <line x1="60" y1="10" x2="60" y2="20" stroke="black" stroke-width="2"/> <!-- 매달리는 줄 -->
            <!-- 졸라맨 -->
            <circle id="part1" class="svg-part" cx="60" cy="30" r="10" stroke="black" stroke-width="2" fill="none"/> <!-- 머리, 크기를 더 크게 조정 -->
            <line id="part2" class="svg-part" x1="60" y1="40" x2="60" y2="50" stroke="black" stroke-width="2"/> <!-- 목, 짧게 조정 -->
            <line id="part3" class="svg-part" x1="60" y1="50" x2="60" y2="80" stroke="black" stroke-width="2"/> <!-- 몸통 -->
            <line id="part4" class="svg-part" x1="60" y1="60" x2="50" y2="70" stroke="black" stroke-width="2"/> <!-- 왼팔 -->
            <line id="part5" class="svg-part" x1="60" y1="60" x2="70" y2="70" stroke="black" stroke-width="2"/> <!-- 오른팔 -->
            <line id="part6" class="svg-part" x1="60" y1="80" x2="50" y2="90" stroke="black" stroke-width="2"/> <!-- 왼쪽 다리 -->
            <line id="part7" class="svg-part" x1="60" y1="80" x2="70" y2="90" stroke="black" stroke-width="2"/> <!-- 오른쪽 다리 -->
            <!-- 추가적인 부분 -->
            <circle id="part8" class="svg-part" cx="56" cy="29" r="1" fill="black"/> <!-- 왼쪽 눈 -->
            <circle id="part9" class="svg-part" cx="64" cy="29" r="1" fill="black"/> <!-- 오른쪽 눈 -->
            <line id="part10" class="svg-part" x1="57" y1="33" x2="63" y2="33" stroke="black" stroke-width="1"/> <!-- 입 -->
            <line id="part11" class="svg-part" x1="50" y1="70" x2="45" y2="68" stroke="black" stroke-width="2"/> <!-- 왼손 -->
            <line id="part12" class="svg-part" x1="70" y1="70" x2="75" y2="68" stroke="black" stroke-width="2"/> <!-- 오른손 -->
            <line id="part13" class="svg-part" x1="50" y1="90" x2="45" y2="93" stroke="black" stroke-width="2"/> <!-- 왼발 -->
            <line id="part14" class="svg-part" x1="70" y1="90" x2="75" y2="93" stroke="black" stroke-width="2"/> <!-- 오른발 -->
        </svg>
    </div>
    <script>
        let word = '';
        let wordArr = [];
        let chances = 0;
        let usedLetters = [];

        function fetchWord() // 외부 API에서 랜덤한 단어를 가져오는 함수
        {
            fetch('https://random-word-api.herokuapp.com/word?number=1')
                .then(response => response.json())
                .then(words => 
                {
                    word = words[0];
                    wordArr = new Array(word.length);
                    wordArr.fill('_');
                    chances = word.length * 2;
                    setupGame();
                })
                .catch(error => console.error('Error fetching word:', error));
        }

        function setupGame() {
            setupAlphabet();
            displayWord();
            setupHintButton();
        }

        function displayWord() {
            document.getElementById('wordDisplay').textContent = wordArr.join(" ");
            document.getElementById('chancesDisplay').textContent = "남은 기회: " + chances;
        }

        function updateAlphabet(letter, correct) {
            let letterElement = document.getElementById(letter);
            if (correct) {
                letterElement.classList.add('correct');
            } else {
                letterElement.classList.add('incorrect');
            }
        }

        function setupAlphabet() {
            document.getElementById('alphabet').innerHTML = ''; // Clear previous alphabet setup
            let alphabet = 'abcdefghijklmnopqrstuvwxyz';
            let alphabetDiv = document.getElementById('alphabet');
            alphabet.split('').forEach(function(letter) {
                let letterElement = document.createElement('span');
                letterElement.id = letter;
                letterElement.textContent = letter.toUpperCase();
                letterElement.className = 'letter';
                letterElement.onclick = function() { guess(letter); };
                alphabetDiv.appendChild(letterElement);
            });
        }

        function guess(letter) {
            if (usedLetters.includes(letter) || chances <= 0) {
                return;
            }
            usedLetters.push(letter);

            let correct = false;
            let idx = word.indexOf(letter);
            while (idx !== -1) {
                wordArr[idx] = letter;
                idx = word.indexOf(letter, idx + 1);
                correct = true;
            }

            if (!correct) {
                chances--;
            }

            updateAlphabet(letter, correct);
            displayWord();

            if (wordArr.indexOf('_') === -1) {
                alert("정답입니다! 단어는 " + word + "였습니다.");
            } else if (chances <= 0) {
                alert("기회를 모두 소진하였습니다. 정답은 " + word + "였습니다.");
            }
        }

        function setupHintButton() {
            let hintButton = document.createElement('button');
            hintButton.textContent = "힌트";
            hintButton.onclick = showHint;
            document.body.appendChild(hintButton);
        }

        function showHint() {
            if (chances > word.length / 2) {
                alert("아직 힌트를 볼 수 없습니다. " + (chances-Math.floor(word.length / 2)) + "번의 기회를 써야 힌트를 보실 수 있습니다.");
            } else {
                // 실제로는 외부 API를 호출하여 단어의 사전적 해석을 가져와야 합니다.
                alert("힌트: " + getWordDefinition(word));
            }
        }

        async function getWordDefinition(word) {
    try {
        // 네이버 Papago 번역 API를 호출하여 단어의 사전적 뜻을 가져옵니다.
        const response = await fetch(`https://openapi.naver.com/v1/papago/n2mt?source=en&target=ko&text=${word}`);
        const data = await response.json();
        
        // API 응답에서 번역된 문장을 추출하여 반환합니다.
        const translation = data.message.result.translatedText;
        return translation;
    } catch (error) {
        console.error('Error fetching word definition:', error);
        return "사전적 해석을 가져올 수 없습니다.";
    }
}


        fetchWord(); // 게임 시작
    </script>
</body>
</html>
