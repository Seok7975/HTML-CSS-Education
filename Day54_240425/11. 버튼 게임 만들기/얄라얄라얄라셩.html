<!DOCTYPE html>
<html lang="kor">
<head>
    <meta charset="utf-8">
    <title>ButtonGame</title>
    <style media="screen">
        #table-container {
            width: 312px;
            height: 300px;
            margin: 0 auto; /* 가로 중앙 정렬 */
        }
        table {
            width : 312px;
            height : 300px;
            border : 0;
        }
        button {
            width : 100px;
            height : 100px;
            background-color : rgb(199, 193, 193);
            line-height: 100px;
            font-size : 45pt;
            border-radius: 10px 10px 10px 10px;
        }
        button:hover {
            background-color : rgb(240, 234, 234);
        }
    </style>
</head>
<body>
    <div id="table-container">
        <div id="demo"></div>
    </div>
    <script>
        const numberArray = new Array(3 ** 2); // [undefined, ... ]

        function randomNumber() {
            numberArray[(3**2)-1] = 0;

            for(let i = 0; i < numberArray.length-1; i++) {
                numberArray[i] = parseInt(((Math.random())*(3 ** 2)+1));
                for(let j = 0; j < i; j++) {
                    if(numberArray[j]==numberArray[i]) {
                        i--;
                    }
                }
            }

            return numberArray;
        }

        function makingBoard() {
            randomNumber();
            let table = ``;
            
            for(let i = 0; i < (numberArray.length ** 0.5); i++) {
                for(let j = 0; j < (numberArray.length ** 0.5); j++) {
                    table +=`<button onclick="changeNumber()">${numberArray[((numberArray.length ** 0.5) * i) + j]}</button>`;
                }
                table +=`<br>`;
            }
            
            return table;
        }

        function changeNumber(row, col) {
            const currentIndex = row * 3 + col;
            const topIndex = currentIndex - 3;
            const bottomIndex = currentIndex + 3;
            const leftIndex = currentIndex - 1;
            const rightIndex = currentIndex + 1;

            if (topIndex >= 0) {
                numberArray[topIndex]++;
                if (numberArray[topIndex] > 9) numberArray[topIndex] = 1;
            }
            if (bottomIndex < 9) {
                numberArray[bottomIndex]++;
                if (numberArray[bottomIndex] > 9) numberArray[bottomIndex] = 1;
            }
            if (leftIndex >= 0 && col !== 0) {
                numberArray[leftIndex]++;
                if (numberArray[leftIndex] > 9) numberArray[leftIndex] = 1;
            }
            if (rightIndex < 9 && col !== 2) {
                numberArray[rightIndex]++;
                if (numberArray[rightIndex] > 9) numberArray[rightIndex] = 1;
            }

            renderTable();
        }

        function renderTable() {
            const tableHTML = makingBoard();
            document.getElementById("demo").innerHTML = tableHTML;
        }

        renderTable();

    </script>
</body>
</html>